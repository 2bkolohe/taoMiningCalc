<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAO Mining Calculator</title>
    <style>
        :root {
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
            --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --radius-base: 8px;
            --radius-lg: 12px;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-charcoal-700: rgba(31, 33, 33, 1);
                --color-charcoal-800: rgba(38, 40, 40, 1);
                --color-gray-200: rgba(245, 245, 245, 1);
                --color-gray-300: rgba(167, 169, 169, 1);
                --color-gray-400-rgb: 119, 124, 124;
                --color-teal-300: rgba(50, 184, 198, 1);
                --color-teal-300-rgb: 50, 184, 198;
                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(var(--color-gray-300), 0.7);
                --color-primary: var(--color-teal-300);
                --color-border: rgba(var(--color-gray-400-rgb), 0.3);
                --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
                --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-base);
            background-color: var(--color-background);
            color: var(--color-text);
            padding: var(--space-24);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: var(--space-24);
            color: var(--color-text);
        }

        .cards-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-24);
            margin-bottom: var(--space-24);
        }

        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
        }

        .card h2 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: var(--space-20);
            color: var(--color-text);
        }

        .input-group {
            margin-bottom: var(--space-20);
        }

        label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: 500;
            font-size: 14px;
            color: var(--color-text);
        }

        input[type="number"] {
            width: 100%;
            padding: var(--space-12);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 16px;
            background-color: var(--color-background);
            color: var(--color-text);
            transition: border-color 0.2s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-focus-ring);
        }

        .result-grid {
            display: grid;
            gap: var(--space-16);
        }

        .result-item {
            padding: var(--space-16);
            background-color: var(--color-background);
            border-radius: var(--radius-base);
            border: 1px solid var(--color-card-border);
        }

        .result-label {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-primary);
        }

        .result-value.large {
            font-size: 28px;
        }

        .tier-info {
            margin-top: var(--space-16);
            padding: var(--space-12);
            background-color: var(--color-background);
            border-radius: var(--radius-base);
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--space-16);
        }

        th, td {
            padding: var(--space-12);
            text-align: left;
            border-bottom: 1px solid var(--color-card-border);
        }

        th {
            font-weight: 600;
            font-size: 13px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            font-size: 15px;
            color: var(--color-text);
        }

        .highlight {
            color: var(--color-primary);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TAO Mining Share Calculator</h1>
        
        <div class="cards-container">
            <!-- Current Market Calculator -->
            <div class="card">
                <h2>Current Market Calculator</h2>
                <div class="input-group">
                    <label for="coinsMarket">Number of Coins Mined</label>
                    <input type="number" id="coinsMarket" min="1" step="1" value="100" placeholder="Enter number of coins">
                </div>
                <div class="input-group">
                    <label for="currentPrice">Current TAO Price (USD)</label>
                    <input type="number" id="currentPrice" min="0" step="0.01" value="500" placeholder="Enter current TAO price">
                </div>
                
                <div class="result-grid">
                    <div class="result-item">
                        <div class="result-label">Your Share (TAO)</div>
                        <div class="result-value" id="yourShareMarket">0.00</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Your Value (Current Price)</div>
                        <div class="result-value large" id="yourValueMarket">$0.00</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Company Share (TAO)</div>
                        <div class="result-value" id="companyShareMarket">0.00</div>
                    </div>
                </div>
                
                <div class="tier-info" id="tierInfoMarket">
                    Enter number of coins to see breakdown
                </div>
            </div>

            <!-- Chart -->
            <div class="card">
                <h2>Cumulative Value Chart</h2>
                <canvas id="miningChart"></canvas>
            </div>
        </div>

        <!-- Tier Breakdown Table -->
        <div class="card">
            <h2>Tier Structure</h2>
            <table>
                <thead>
                    <tr>
                        <th>Coin Range</th>
                        <th>Your Share %</th>
                        <th>TAO per Coin</th>
                        <th>Value per Coin @ $500</th>
                        <th>Value per Coin (Current)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1 - 10</td>
                        <td class="highlight">50%</td>
                        <td>0.5 TAO</td>
                        <td>$250.00</td>
                        <td id="tier1Current">$250.00</td>
                    </tr>
                    <tr>
                        <td>11 - 100</td>
                        <td class="highlight">25%</td>
                        <td>0.25 TAO</td>
                        <td>$125.00</td>
                        <td id="tier2Current">$125.00</td>
                    </tr>
                    <tr>
                        <td>101 - 1,000</td>
                        <td class="highlight">12.5%</td>
                        <td>0.125 TAO</td>
                        <td>$62.50</td>
                        <td id="tier3Current">$62.50</td>
                    </tr>
                    <tr>
                        <td>1,001 - 10,000</td>
                        <td class="highlight">6.25%</td>
                        <td>0.0625 TAO</td>
                        <td>$31.25</td>
                        <td id="tier4Current">$31.25</td>
                    </tr>
                    <tr>
                        <td>10,001 - 100,000</td>
                        <td class="highlight">3.125%</td>
                        <td>0.03125 TAO</td>
                        <td>$15.63</td>
                        <td id="tier5Current">$15.63</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
        let miningChart = null;

        function getTierShare(coinNumber) {
            if (coinNumber <= 10) return 0.50;
            if (coinNumber <= 100) return 0.25;
            if (coinNumber <= 1000) return 0.125;
            if (coinNumber <= 10000) return 0.0625;
            if (coinNumber <= 100000) return 0.03125;
            return 0.015625; // Continue halving pattern
        }

        function calculateShares(totalCoins) {
            let yourTotal = 0;
            let companyTotal = 0;

            for (let i = 1; i <= totalCoins; i++) {
                const share = getTierShare(i);
                yourTotal += share;
                companyTotal += (1 - share);
            }

            return { yourTotal, companyTotal };
        }

        function getTierInfo(totalCoins) {
            const currentTierShare = getTierShare(totalCoins);
            const percentage = (currentTierShare * 100).toFixed(2);
            
            let tierRange = '';
            if (totalCoins <= 10) tierRange = '1-10';
            else if (totalCoins <= 100) tierRange = '11-100';
            else if (totalCoins <= 1000) tierRange = '101-1,000';
            else if (totalCoins <= 10000) tierRange = '1,001-10,000';
            else if (totalCoins <= 100000) tierRange = '10,001-100,000';
            else tierRange = '100,001+';

            return `Current tier: Coins ${tierRange} (${percentage}% per coin)`;
        }

        function formatNumber(num) {
            return num.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        function updateFixed() {
            const coins = parseInt(document.getElementById('coinsFixed').value) || 0;
            const fixedPrice = 500;

            if (coins > 0) {
                const { yourTotal, companyTotal } = calculateShares(coins);
                const yourValue = yourTotal * fixedPrice;

                document.getElementById('yourShareFixed').textContent = formatNumber(yourTotal) + ' TAO';
                document.getElementById('yourValueFixed').textContent = '$' + formatNumber(yourValue);
                document.getElementById('companyShareFixed').textContent = formatNumber(companyTotal) + ' TAO';
                document.getElementById('tierInfoFixed').textContent = getTierInfo(coins);
            } else {
                document.getElementById('yourShareFixed').textContent = '0.00 TAO';
                document.getElementById('yourValueFixed').textContent = '$0.00';
                document.getElementById('companyShareFixed').textContent = '0.00 TAO';
                document.getElementById('tierInfoFixed').textContent = 'Enter number of coins to see breakdown';
            }
        }

        function updateChart(coins, currentPrice) {
            const ctx = document.getElementById('miningChart').getContext('2d');
            
            // Calculate cumulative values for chart
            const dataPoints = [];
            const intervals = Math.min(coins, 100); // Show max 100 points for performance
            const step = Math.max(1, Math.floor(coins / intervals));
            
            let cumYourTAO = 0;
            for (let i = 1; i <= coins; i++) {
                cumYourTAO += getTierShare(i);
                if (i % step === 0 || i === coins) {
                    dataPoints.push({
                        x: i,
                        y: cumYourTAO * currentPrice
                    });
                }
            }

            if (miningChart) {
                miningChart.destroy();
            }

            miningChart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Your Cumulative Value (USD)',
                        data: dataPoints,
                        borderColor: 'rgba(33, 128, 141, 1)',
                        backgroundColor: 'rgba(33, 128, 141, 0.1)',
                        fill: true,
                        tension: 0.1,
                        pointRadius: 2,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    aspectRatio: 1.5,
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-text').trim()
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Value: $' + formatNumber(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'Number of Coins Mined',
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-text').trim()
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-text-secondary').trim()
                            },
                            grid: {
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-border').trim()
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Cumulative Value (USD)',
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-text').trim()
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-text-secondary').trim(),
                                callback: function(value) {
                                    return '$' + formatNumber(value);
                                }
                            },
                            grid: {
                                color: getComputedStyle(document.documentElement)
                                    .getPropertyValue('--color-border').trim()
                            }
                        }
                    }
                }
            });
        }

        function updateTierTable(currentPrice) {
            document.getElementById('tier1Current').textContent = '$' + formatNumber(0.5 * currentPrice);
            document.getElementById('tier2Current').textContent = '$' + formatNumber(0.25 * currentPrice);
            document.getElementById('tier3Current').textContent = '$' + formatNumber(0.125 * currentPrice);
            document.getElementById('tier4Current').textContent = '$' + formatNumber(0.0625 * currentPrice);
            document.getElementById('tier5Current').textContent = '$' + formatNumber(0.03125 * currentPrice);
        }

        function updateMarket() {
            const coins = parseInt(document.getElementById('coinsMarket').value) || 0;
            const currentPrice = parseFloat(document.getElementById('currentPrice').value) || 0;

            if (coins > 0 && currentPrice > 0) {
                const { yourTotal, companyTotal } = calculateShares(coins);
                const yourValue = yourTotal * currentPrice;

                document.getElementById('yourShareMarket').textContent = formatNumber(yourTotal) + ' TAO';
                document.getElementById('yourValueMarket').textContent = '$' + formatNumber(yourValue);
                document.getElementById('companyShareMarket').textContent = formatNumber(companyTotal) + ' TAO';
                document.getElementById('tierInfoMarket').textContent = getTierInfo(coins) + ` | Current price: $${formatNumber(currentPrice)}/TAO`;
                
                updateChart(coins, currentPrice);
                updateTierTable(currentPrice);
            } else {
                document.getElementById('yourShareMarket').textContent = '0.00 TAO';
                document.getElementById('yourValueMarket').textContent = '$0.00';
                document.getElementById('companyShareMarket').textContent = '0.00 TAO';
                document.getElementById('tierInfoMarket').textContent = 'Enter number of coins to see breakdown';
            }
        }

        // Event listeners
        document.getElementById('coinsMarket').addEventListener('input', updateMarket);
        document.getElementById('currentPrice').addEventListener('input', updateMarket);

        // Initial calculation
        updateMarket();
    </script>
</body>
</html>
